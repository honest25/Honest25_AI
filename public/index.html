<!DOCTYPE html>
<html>
<head>
    <title>Honest25-AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-zinc-200">
    <div class="max-w-3xl mx-auto p-6">
        <div class="flex items-center justify-between border-b border-zinc-800 pb-4 mb-6">
            <h1 class="text-xl font-black text-blue-500">HONEST25-AI</h1>
            <div id="loader" class="hidden text-xs text-yellow-500 animate-pulse">MODEL FALLBACK ACTIVE...</div>
        </div>

        <div id="chat-display" class="space-y-4 mb-24"></div>

        <div class="fixed bottom-0 left-0 w-full bg-black/80 backdrop-blur-md p-6">
            <div class="max-w-3xl mx-auto flex gap-2">
                <input id="prompt" class="flex-1 bg-zinc-900 border border-zinc-800 p-3 rounded-lg outline-none focus:border-blue-500" placeholder="Ask anything...">
                <button onclick="runHonest()" class="bg-blue-600 px-6 py-2 rounded-lg font-bold">SEND</button>
            </div>
            <p id="info" class="text-[10px] text-zinc-600 mt-2 text-center"></p>
        </div>
    </div>

    <script>
        async function runHonest() {
            const p = document.getElementById('prompt');
            const d = document.getElementById('chat-display');
            const l = document.getElementById('loader');
            const info = document.getElementById('info');
            
            if(!p.value) return;
            const query = p.value;
            p.value = '';
            l.classList.remove('hidden');

            d.innerHTML += `<div class="text-white font-bold mt-4">User: ${query}</div>`;

            const res = await fetch('/api/chat', {
                method: 'POST',
                body: JSON.stringify({ messages: [{role:'user', content: query}] })
            });

            const data = await res.json();
            l.classList.add('hidden');
            info.innerText = "Model used: " + (data.modelUsed || "None");
            d.innerHTML += `<div class="bg-zinc-900 p-4 rounded-xl border border-zinc-800"><b>Honest25-AI:</b><br>${data.reply}</div>`;
            window.scrollTo(0, document.body.scrollHeight);
        }
    </script>
</body>
</html>
